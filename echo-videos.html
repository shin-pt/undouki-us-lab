<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>エコー動画販売 - 運動器超音波Lab</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="運動器超音波Labのエコー動画を購入できます。臨床で役立つ実践的な超音波技術を動画で学習。">
    <meta name="keywords" content="エコー動画,超音波動画,運動器超音波,理学療法,学習動画">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Stripe Payment Configuration -->
    <script src="video-payment-config.js"></script>
    <!-- Vimeo Mapping -->
    <script src="vimeo-mapping.js"></script>

    <style>
        /* --- CSS Variables --- */
        :root {
            --bg-color: #121212;
            --bg-light-color: #f4f6f8;
            --text-color: #e0e0e0;
            --text-dark-color: #333333;
            --primary-color: #007bff;
            --secondary-color: #999999;
            --accent-green: #28a745;
            --accent-purple: #9c27b0;
            --container-width: 1140px;
            --section-padding: 100px 0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            height: 100%;
        }

        body {
            font-family: 'Noto Sans JP', 'Poppins', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-size: 16px;
            line-height: 1.8;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 100%; /* スマホでは全幅 */
            margin: 0 auto;
            padding: 0 15px; /* スマホ向けに小さく */
        }

        section {
            padding: 40px 0; /* スマホ向けに小さく */
        }

        h1, h2, h3, h4 {
            font-family: 'Poppins', 'Noto Sans JP', sans-serif;
            font-weight: 700;
            color: var(--text-color);
            line-height: 1.3;
        }

        h1.page-title {
            font-size: 1.8rem; /* スマホ向けに小さく */
            margin-bottom: 15px; /* スマホ向けに小さく */
            font-weight: 900;
            text-align: center;
            word-break: keep-all;
            overflow-wrap: break-word;
            padding: 0 10px;
        }

        .page-intro {
            color: var(--secondary-color);
            max-width: 100%; /* スマホでは全幅 */
            margin: 0 auto 30px auto; /* スマホ向けに小さく */
            font-size: 0.9rem; /* スマホ向けに小さく */
            text-align: center;
            padding: 0 10px;
            line-height: 1.7;
        }

        /* --- Header --- */
        .main-header {
            position: relative;
            padding: 20px 0; /* スマホ向けに小さく */
            background-color: var(--bg-color);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .main-header .container {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
            position: relative;
        }
        .logo {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-color);
            text-decoration: none;
            letter-spacing: 1px;
            word-break: keep-all;
            overflow-wrap: break-word;
            flex: 1;
        }

        /* ハンバーガーメニューボタン */
        .menu-toggle {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            width: 30px;
            height: 30px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            z-index: 1001;
            touch-action: manipulation;
        }

        .menu-toggle span {
            width: 100%;
            height: 3px;
            background-color: #e0e0e0;
            border-radius: 3px;
            transition: all 0.3s ease;
        }

        .menu-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(8px, 8px);
        }

        .menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }

        .menu-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -7px);
        }

        .nav-links {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(18, 18, 18, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            margin-top: 10px;
            padding: 15px;
            flex-direction: column;
            gap: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 10000;
        }

        .nav-links.active {
            display: flex;
        }

        .nav-links a {
            color: #e0e0e0;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            padding: 12px 15px;
            min-height: 44px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            touch-action: manipulation;
            border-radius: 8px;
        }

        .nav-links a:hover {
            color: #007bff;
            background: rgba(255, 255, 255, 0.05);
        }

        .nav-links a i {
            font-size: 1rem;
        }

        /* --- Filter Section --- */
        .filter-section {
            text-align: center;
            margin-bottom: 50px;
        }

        .filter-buttons {
            display: flex;
            justify-content: flex-start; /* スマホでは左寄せ */
            gap: 8px; /* スマホ向けに小さく */
            flex-wrap: wrap;
            margin-bottom: 25px; /* スマホ向けに小さく */
            overflow-x: auto; /* 横スクロール対応 */
            -webkit-overflow-scrolling: touch;
        }

        .filter-btn {
            padding: 10px 18px; /* スマホ向けに調整 */
            min-height: 44px; /* タッチターゲット確保 */
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            color: var(--text-color);
            font-weight: 600;
            font-size: 0.85rem; /* スマホ向けに小さく */
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            touch-action: manipulation; /* タッチ最適化 */
        }

        /* スマホでのホバー効果を無効化 */
        @media (hover: none) {
            .filter-btn:hover {
                border-color: rgba(255, 255, 255, 0.2);
                background: rgba(255, 255, 255, 0.05);
            }
        }

        /* アクティブ状態（タッチ時） */
        .filter-btn:active {
            transform: scale(0.95);
            opacity: 0.8;
        }

        .filter-btn:hover {
            border-color: var(--primary-color);
            background: rgba(0, 123, 255, 0.1);
        }

        .filter-btn.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }

        .search-box {
            max-width: 500px;
            margin: 0 auto;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            color: var(--text-color);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary-color);
            background: rgba(255, 255, 255, 0.1);
        }

        .search-box i {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--secondary-color);
        }

        /* --- Video Grid --- */
        .videos-section {
            padding-top: 60px;
            flex: 1;
            padding-bottom: 40px;
        }

        .category-section {
            margin-bottom: 80px;
        }

        .category-title {
            font-size: 2rem;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--primary-color);
            display: inline-block;
        }

        .video-grid {
            display: grid;
            grid-template-columns: 1fr; /* スマホでは1列 */
            gap: 20px; /* スマホ向けに小さく */
            margin-bottom: 40px; /* スマホ向けに小さく */
        }

        .video-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        /* スマホでのホバー効果を無効化 */
        @media (hover: none) {
            .video-card:hover {
                transform: none;
                border-color: rgba(255, 255, 255, 0.1);
                box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            }
        }

        /* アクティブ状態（タッチ時） */
        .video-card:active {
            transform: scale(0.98);
            opacity: 0.9;
        }

        /* PCでのホバー効果 */
        @media (hover: hover) {
            .video-card:hover {
                transform: translateY(-10px);
                border-color: rgba(255, 255, 255, 0.3);
                box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            }
        }

        .video-thumbnail {
            width: 100%;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
            font-weight: 600;
        }

        .video-thumbnail.observation {
            background: rgba(102, 126, 234, 0.15);
            border-bottom: 3px solid #667eea;
        }

        .video-thumbnail.dynamics {
            background: rgba(240, 147, 251, 0.15);
            border-bottom: 3px solid #f093fb;
        }

        .video-type-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
        }

        .video-content {
            padding: 20px;
        }

        .video-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--text-color);
            min-height: 60px;
        }

        .video-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .video-price {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .video-vimeo-link {
            color: var(--secondary-color);
            font-size: 0.85rem;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .video-vimeo-link:hover {
            color: var(--primary-color);
        }

        .buy-btn {
            display: block;
            width: 100%;
            padding: 14px 20px; /* スマホ向けに調整 */
            min-height: 48px; /* タッチターゲット確保 */
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            border-radius: 50px;
            font-weight: 700;
            text-decoration: none;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 0.95rem; /* スマホ向けに小さく */
            touch-action: manipulation; /* タッチ最適化 */
        }

        /* スマホでのホバー効果を無効化 */
        @media (hover: none) {
            .buy-btn:hover,
            .buy-btn.free-btn:hover {
                transform: none;
                box-shadow: none;
            }
        }

        /* アクティブ状態（タッチ時） */
        .buy-btn:active {
            transform: scale(0.98);
            opacity: 0.9;
        }

        /* PCでのホバー効果 */
        @media (hover: hover) {
            .buy-btn:hover {
                background-color: #0056b3;
                transform: translateY(-2px);
                box-shadow: 0 8px 20px rgba(0, 123, 255, 0.3);
            }

            .buy-btn.free-btn:hover {
                background: linear-gradient(135deg, #218838 0%, #1aa179 100%);
                box-shadow: 0 8px 20px rgba(40, 167, 69, 0.3);
            }
        }

        .buy-btn.disabled {
            background-color: #666;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .buy-btn.disabled:hover {
            transform: none;
            box-shadow: none;
        }

        .buy-btn.free-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .buy-btn.free-btn:hover {
            background: linear-gradient(135deg, #218838 0%, #1aa179 100%);
            box-shadow: 0 8px 20px rgba(40, 167, 69, 0.3);
        }

        /* Premium Banner */
        .premium-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 40px;
            text-align: center;
            color: white;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .premium-banner h3 {
            color: white;
            margin-bottom: 10px;
            font-size: 1.5rem;
        }

        .premium-banner p {
            margin-bottom: 15px;
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .premium-banner a {
            background: white;
            color: #667eea;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            display: inline-block;
            transition: transform 0.2s;
        }

        .premium-banner a:hover {
            transform: translateY(-2px);
        }

        /* Non-Premium Banner */
        .non-premium-banner {
            background: rgba(255, 193, 7, 0.1);
            border: 2px solid rgba(255, 193, 7, 0.3);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 40px;
            text-align: center;
        }

        .non-premium-banner h3 {
            color: #ffc107;
            margin-bottom: 10px;
            font-size: 1.5rem;
        }

        .non-premium-banner p {
            color: #e0e0e0;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .non-premium-banner a {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            display: inline-block;
            transition: transform 0.2s;
        }

        .non-premium-banner a:hover {
            transform: translateY(-2px);
        }

        /* Video Modal */
        .video-modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            animation: fadeIn 0.3s;
        }

        .video-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            position: relative;
            width: 90%;
            max-width: 1200px;
            background: #1a1a2e;
            border-radius: 16px;
            padding: 30px;
            animation: slideUp 0.3s;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2rem;
            color: #e0e0e0;
            cursor: pointer;
            transition: color 0.3s;
            z-index: 10001;
        }

        .close-modal:hover {
            color: #fff;
        }

        .modal-content h2 {
            margin-bottom: 20px;
            color: #fff;
            font-size: 1.5rem;
        }

        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            border-radius: 8px;
        }

        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* --- Info Section --- */
        .info-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 50px;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 80px;
        }

        .info-section h2 {
            font-size: 2rem;
            margin-bottom: 30px;
            text-align: center;
            color: var(--primary-color);
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .info-item {
            text-align: center;
        }

        .info-item i {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .info-item h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .info-item p {
            color: var(--secondary-color);
            font-size: 0.95rem;
        }

        /* --- Stats Bar --- */
        .stats-bar {
            background: rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 12px;
            display: flex;
            justify-content: space-around;
            margin-bottom: 50px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--primary-color);
        }

        .stat-label {
            color: var(--secondary-color);
            font-size: 0.9rem;
            margin-top: 5px;
        }

        /* --- Footer --- */
        footer {
            padding: 30px 0;
            background-color: #0c0c0c;
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: auto;
            width: 100%;
            flex-shrink: 0;
        }

        footer div {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        footer p {
            color: #999;
            font-size: 0.85rem;
            margin-bottom: 10px;
        }

        footer p:last-child {
            color: #555;
            font-size: 0.9rem;
            margin-bottom: 0;
        }

        footer a {
            color: #999;
            text-decoration: none;
            margin: 0 10px;
            transition: color 0.3s ease;
        }

        footer a:hover {
            color: #fff;
        }

        footer span {
            color: #666;
        }

        .copyright {
            color: #555;
            font-size: 0.9rem;
        }

        /* --- Responsive Design (Mobile-First) --- */

        /* タブレット対応 (768px以上) */
        @media (min-width: 768px) {
            .container {
                max-width: var(--container-width);
                padding: 0 20px;
            }

            section {
                padding: 60px 0;
            }

            .main-header {
                padding: 30px 0;
            }

            .main-header .container {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                gap: 0;
            }

            .logo {
                font-size: 1.8rem;
            }

            .menu-toggle {
                display: none;
            }

            .nav-links {
                display: flex !important;
                position: static;
                flex-direction: row;
                flex-wrap: wrap;
                gap: 15px;
                width: auto;
                background: transparent;
                backdrop-filter: none;
                border: none;
                box-shadow: none;
                padding: 0;
                margin: 0;
            }

            .nav-links a {
                width: auto;
                padding: 8px 12px;
                font-size: 0.95rem;
            }

            h1.page-title {
                font-size: 3rem;
                margin-bottom: 20px;
                padding: 0;
            }

            .page-intro {
                max-width: 700px;
                margin: 0 auto 60px auto;
                font-size: 1.1rem;
                padding: 0;
            }

            .filter-buttons {
                justify-content: center;
                gap: 15px;
            }

            .filter-btn {
                padding: 12px 30px;
                font-size: 1rem;
            }

            .video-grid {
                grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
                gap: 30px;
                margin-bottom: 60px;
            }

            .info-section {
                padding: 50px;
            }

            .info-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }

            .stats-bar {
                padding: 30px;
            }

            .stat-number {
                font-size: 2.5rem;
            }
        }

        /* PC対応 (992px以上) */
        @media (min-width: 992px) {
            .filter-btn:hover {
                border-color: var(--primary-color);
                background: rgba(0, 123, 255, 0.1);
            }
        }

        /* 超小型デバイス (最大400px) */
        @media (max-width: 400px) {
            .container {
                padding: 0 12px;
            }

            section {
                padding: 30px 0;
            }

            .main-header {
                padding: 15px 0;
            }

            .logo {
                font-size: 1.1rem;
            }

            .nav-links {
                width: 100%;
                flex-direction: column;
                gap: 8px;
                align-items: stretch;
            }

            .nav-links a {
                width: 100%;
                padding: 12px 15px;
                font-size: 0.9rem;
                justify-content: flex-start;
                border: 1px solid rgba(255, 255, 255, 0.1);
                background: rgba(255, 255, 255, 0.03);
            }

            .nav-links a:hover {
                background: rgba(255, 255, 255, 0.08);
            }

            .nav-links a i {
                font-size: 1.1rem;
                width: 20px;
                text-align: center;
            }

            h1.page-title {
                font-size: 1.5rem;
                margin-bottom: 12px;
            }

            .page-intro {
                font-size: 0.85rem;
                margin-bottom: 25px;
            }

            .filter-btn {
                padding: 8px 14px;
                font-size: 0.8rem;
            }

            .video-grid {
                gap: 15px;
                margin-bottom: 30px;
            }

            .stats-bar {
                padding: 15px;
                flex-direction: column;
                gap: 15px;
            }

            .stat-number {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>

    <header class="main-header">
        <div class="container">
            <a href="index.html" class="logo">運動器超音波Lab</a>
            <button class="menu-toggle" id="menuToggle" aria-label="メニューを開く">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <nav class="nav-links" id="navLinks">
                <a href="index.html"><i class="fas fa-home"></i> ホーム</a>
                <a href="member.html" id="memberLink" style="display: none;"><i class="fas fa-user"></i> マイページ</a>
                <a href="salon.html"><i class="fas fa-users"></i> オンラインサロン</a>
                <a href="echo-videos.html"><i class="fas fa-video"></i> エコー動画</a>
                <a href="/quiz-app/"><i class="fas fa-question-circle"></i> エコークイズ</a>
                <a href="auth.html" id="authLink"><i class="fas fa-sign-in-alt"></i> ログイン</a>
                <a href="#" id="logoutBtn" style="display: none;"><i class="fas fa-sign-out-alt"></i> ログアウト</a>
            </nav>
        </div>
    </header>

    <main>
        <section class="videos-section">
            <div class="container">
                <h1 class="page-title">エコー動画販売</h1>
                <p class="page-intro">
                    臨床で役立つ運動器超音波の実践的な技術を、<strong>高品質な動画</strong>で学習できます。<br>
                    <strong style="color: #28a745;">購入したい動画を選択して、すぐに学習を開始できます。</strong>
                </p>

                <!-- Premium Banner -->
                <div id="premiumBanner" class="premium-banner" style="display: none;">
                    <h3><i class="fas fa-crown"></i> プレミアムプラン会員特典</h3>
                    <p>すべてのエコー動画（67本）を視聴できます！</p>
                    <a href="plans.html" style="background: rgba(255, 255, 255, 0.3); color: white; padding: 12px 24px; border-radius: 8px; font-weight: 600; display: inline-block; text-decoration: none; transition: all 0.3s ease;">
                        <i class="fas fa-crown"></i> プランを確認する
                    </a>
                </div>

                <!-- Non-Premium Banner -->
                <div id="nonPremiumBanner" class="non-premium-banner" style="display: none;">
                    <h3><i class="fas fa-star"></i> プレミアムプランで全動画視聴可能！</h3>
                    <p>2980円プランにご登録いただくと、すべてのエコー動画（67本）を視聴できます。</p>
                    <a href="plans.html" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 24px; border-radius: 8px; font-weight: 600; display: inline-block; text-decoration: none; transition: all 0.3s ease;">
                        <i class="fas fa-crown"></i> プレミアムプランを確認する
                    </a>
                </div>

                <!-- Stats Bar -->
                <div class="stats-bar">
                    <div class="stat-item">
                        <div class="stat-number">67</div>
                        <div class="stat-label">動画総数</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">¥800~</div>
                        <div class="stat-label">観察動画</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">¥900~</div>
                        <div class="stat-label">動態動画</div>
                    </div>
                </div>

                <!-- Filter Section -->
                <div class="filter-section">
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="all">すべて</button>
                        <button class="filter-btn" data-filter="upper_limb">上肢</button>
                        <button class="filter-btn" data-filter="trunk">体幹</button>
                        <button class="filter-btn" data-filter="lower_limb">下肢</button>
                        <button class="filter-btn" data-filter="observation">観察動画</button>
                        <button class="filter-btn" data-filter="dynamics">動態動画</button>
                    </div>
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="動画を検索...">
                        <i class="fas fa-search"></i>
                    </div>
                </div>

                <!-- 上肢動画セクション -->
                <div class="category-section" data-category="upper_limb">
                    <h2 class="category-title">上肢動画</h2>
                    <div class="video-grid" id="upperLimbGrid">
                        <!-- 観察動画 -->
                        <div class="video-card" data-type="observation" data-title="棘上筋・肩甲上神経の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">棘上筋・肩甲上神経の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('shoulder_ssp_tendon')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="棘下筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">棘下筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('shoulder_isp_muscle')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="烏口腕筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">烏口腕筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('coracobrachialis')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="上腕筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">上腕筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('brachialis')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="上腕二頭筋短頭の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">上腕二頭筋短頭の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('biceps_short_head')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="上腕二頭筋長頭の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">上腕二頭筋長頭の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('biceps_long_head')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="腕尺関節の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">腕尺関節の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('humeroradial_joint')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="回外筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">回外筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('supinator')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="総指伸筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">総指伸筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('elbow_common_extensor')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="腕橈関節の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">腕橈関節の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('radiocapitellar_joint')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="腋窩神経前枝・後上腕回旋動脈の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">腋窩神経前枝・後上腕回旋動脈の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('axillary_nerve')">購入する</button>
                            </div>
                        </div>

                        <!-- 動態動画 -->
                        <div class="video-card" data-type="dynamics" data-title="烏口上腕靱帯の動態">
                            <div class="video-thumbnail dynamics">
                                動態動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">烏口上腕靱帯の動態</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥900</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('shoulder_chl_ligament')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="dynamics" data-title="肩甲下筋と烏口腕筋・上腕二頭筋短頭の動態">
                            <div class="video-thumbnail dynamics">
                                動態動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">肩甲下筋と烏口腕筋・上腕二頭筋短頭の動態</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥900</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('subscapularis_dynamics')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="dynamics" data-title="肩外転動作時の動態">
                            <div class="video-thumbnail dynamics">
                                動態動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">肩外転動作時の動態</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥900</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('shoulder_abduction')">購入する</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 体幹動画セクション -->
                <div class="category-section" data-category="trunk">
                    <h2 class="category-title">体幹動画</h2>
                    <div class="video-grid" id="trunkGrid">
                        <div class="video-card" data-type="observation" data-title="頚長筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">頚長筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('longus_colli')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="頭長筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">頭長筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('longus_capitis')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="総頸動脈・甲状腺の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">総頸動脈・甲状腺の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('carotid_thyroid')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="前・中斜角筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">前・中斜角筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('scalene_muscles')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="胸鎖乳突筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">胸鎖乳突筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('sternocleidomastoid')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="肩甲挙筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">肩甲挙筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('levator_scapulae')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="肩甲舌骨筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">肩甲舌骨筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('omohyoid')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="側腹筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">側腹筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('lateral_abdominal')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="腹直筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">腹直筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('rectus_abdominis')">購入する</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 下肢動画セクション -->
                <div class="category-section" data-category="lower_limb">
                    <h2 class="category-title">下肢動画</h2>
                    <div class="video-grid" id="lowerLimbGrid">
                        <!-- 観察動画（一部抜粋、実際は全40本以上） -->
                        <div class="video-card" data-type="observation" data-title="大腿直筋起始部の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">大腿直筋起始部の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('quad_rf_origin')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="大腿四頭筋 長軸の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">大腿四頭筋 長軸の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('quadriceps_long')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="大腿四頭筋 短軸の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">大腿四頭筋 短軸の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('quadriceps_short')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="内側広筋斜走線維の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">内側広筋斜走線維の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('vastus_medialis_oblique')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="膝内側側副靱帯の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">膝内側側副靱帯の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('mcl_knee')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="膝外側側副靱帯の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">膝外側側副靱帯の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('lcl_knee')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="内側半月板の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">内側半月板の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('medial_meniscus')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="膝蓋下脂肪体の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">膝蓋下脂肪体の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('infrapatellar_fat_pad')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="膝蓋骨外側支持組織の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">膝蓋骨外側支持組織の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('lateral_patellar_retinaculum')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="薄筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">薄筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('gracilis')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="長内転筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">長内転筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('adductor_longus')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="半腱様筋・半膜様筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">半腱様筋・半膜様筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('semitendinosus_semimembranosus')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="長母趾伸筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">長母趾伸筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('extensor_hallucis_longus')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="長趾伸筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">長趾伸筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('extensor_digitorum_longus')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="足底腱膜の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">足底腱膜の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('plantar_fascia')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="前脛骨筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">前脛骨筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('tibialis_anterior')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="前距腓靱帯の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">前距腓靱帯の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('anterior_talofibular_ligament')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="小趾外転筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">小趾外転筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('abductor_digiti_minimi')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="母趾外転筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">母趾外転筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('abductor_hallucis')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="距骨前脂肪体の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">距骨前脂肪体の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('anterior_talofibular_fat_pad')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="下腿三頭筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">下腿三頭筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('triceps_surae')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="アキレス腱周囲の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">アキレス腱周囲の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('achilles_tendon')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="腸脛靭帯の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">腸脛靭帯の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('iliotibial_band')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="縫工筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">縫工筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('sartorius')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="長母趾伸筋の観察2">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">長母趾伸筋の観察2</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('extensor_hallucis_longus_2')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="小殿筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">小殿筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('gluteus_minimus')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="observation" data-title="大腿筋膜張筋の観察">
                            <div class="video-thumbnail observation">
                                観察動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">大腿筋膜張筋の観察</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥800</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('tensor_fasciae_latae')">購入する</button>
                            </div>
                        </div>

                        <!-- 動態動画 -->
                        <div class="video-card" data-type="dynamics" data-title="膝屈伸時の縫工筋の動態">
                            <div class="video-thumbnail dynamics">
                                動態動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">膝屈伸時の縫工筋の動態</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥900</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('sartorius_dynamics')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="dynamics" data-title="膝屈伸時の内側半月板の動態">
                            <div class="video-thumbnail dynamics">
                                動態動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">膝屈伸時の内側半月板の動態</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥900</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('medial_meniscus_dynamics')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="dynamics" data-title="膝屈伸時の大腿前脂肪体の動態">
                            <div class="video-thumbnail dynamics">
                                動態動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">膝屈伸時の大腿前脂肪体の動態</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥900</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('suprapatellar_fat_pad_dynamics')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="dynamics" data-title="底背屈時のKFPの動態">
                            <div class="video-thumbnail dynamics">
                                動態動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">底背屈時のKFPの動態</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥900</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('kager_fat_pad')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="dynamics" data-title="内反ストレス時の膝外側側副靱帯の動態">
                            <div class="video-thumbnail dynamics">
                                動態動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">内反ストレス時の膝外側側副靱帯の動態</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥900</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('lcl_stress')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="dynamics" data-title="底背屈時の距腿関節の動態">
                            <div class="video-thumbnail dynamics">
                                動態動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">底背屈時の距腿関節の動態</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥900</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('talocrural_joint')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="dynamics" data-title="大腿四頭筋セッティング時の膝蓋下脂肪体">
                            <div class="video-thumbnail dynamics">
                                動態動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">大腿四頭筋セッティング時の膝蓋下脂肪体</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥900</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('infrapatellar_fat_pad_setting')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="dynamics" data-title="大腿四頭筋セッティング時の大腿前脂肪体">
                            <div class="video-thumbnail dynamics">
                                動態動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">大腿四頭筋セッティング時の大腿前脂肪体</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥900</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('suprapatellar_fat_pad_setting')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="dynamics" data-title="大腿四頭筋セッティング時の筋動態">
                            <div class="video-thumbnail dynamics">
                                動態動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">大腿四頭筋セッティング時の筋動態</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥900</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('quadriceps_setting')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="dynamics" data-title="膝屈伸時の膝蓋骨外側組織の動態">
                            <div class="video-thumbnail dynamics">
                                動態動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">膝屈伸時の膝蓋骨外側組織の動態</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥900</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('lateral_patellar_dynamics')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="dynamics" data-title="膝蓋骨外側支持組織への徒手療法">
                            <div class="video-thumbnail dynamics">
                                動態動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">膝蓋骨外側支持組織への徒手療法</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥900</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('lateral_patellar_manual')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="dynamics" data-title="膝蓋下脂肪体への徒手療法">
                            <div class="video-thumbnail dynamics">
                                動態動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">膝蓋下脂肪体への徒手療法</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥900</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('infrapatellar_fat_pad_manual')">購入する</button>
                            </div>
                        </div>

                        <div class="video-card" data-type="dynamics" data-title="長母趾屈筋への徒手療法">
                            <div class="video-thumbnail dynamics">
                                動態動画
                            </div>
                            <div class="video-content">
                                <h3 class="video-title">長母趾屈筋への徒手療法</h3>
                                <div class="video-meta">
                                    <span class="video-price">¥900</span>
                                </div>
                                <button class="buy-btn" onclick="purchaseVideo('flexor_hallucis_longus_manual')">購入する</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 動画学習の特徴 -->
                <div class="info-section">
                    <h2>動画学習の特徴</h2>
                    <div class="info-grid">
                        <div class="info-item">
                            <i class="fas fa-infinity"></i>
                            <h3>無制限視聴</h3>
                            <p>購入後は何度でも繰り返し視聴できます</p>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-mobile-alt"></i>
                            <h3>マルチデバイス対応</h3>
                            <p>スマホ・タブレット・PCで視聴可能</p>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-certificate"></i>
                            <h3>高品質コンテンツ</h3>
                            <p>臨床経験豊富な講師による実践的な内容</p>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-download"></i>
                            <h3>即時アクセス</h3>
                            <p>購入後すぐに視聴を開始できます</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div>
            <p>
                <a href="terms.html">利用規約</a>
                <span>|</span>
                <a href="privacy.html">プライバシーポリシー</a>
                <span>|</span>
                <a href="law.html">特定商取引法に基づく表記</a>
            </p>
            <p>© 2024 運動器超音波Lab. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- Video Modal -->
    <div id="videoModal" class="video-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2 id="modalTitle">動画タイトル</h2>
            <div class="video-wrapper">
                <iframe id="vimeoPlayer" src="" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <!-- Firebase SDK for Premium Plan Check -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { 
            getAuth, 
            onAuthStateChanged,
            signOut
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { 
            getFirestore, 
            doc,
            getDoc
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Firebase設定
        const firebaseConfig = {
            apiKey: "AIzaSyAGKikNortFcMI_uLnGn2y_OyI6ZyxLiR0",
            authDomain: "musculoskeletal-us-lab.firebaseapp.com",
            projectId: "musculoskeletal-us-lab",
            storageBucket: "musculoskeletal-us-lab.firebasestorage.app",
            messagingSenderId: "199172067938",
            appId: "1:199172067938:web:cdbcf04400cc74a784b73b"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let userPlan = null; // ユーザーのプラン情報

        // UI要素
        const authLink = document.getElementById('authLink');
        const memberLink = document.getElementById('memberLink');
        const logoutBtn = document.getElementById('logoutBtn');

        // 認証状態に応じてナビゲーションを更新
        function updateNavigation(user) {
            if (user) {
                // ログイン時
                if (authLink) authLink.style.display = 'none';
                if (memberLink) memberLink.style.display = 'inline-flex';
                if (logoutBtn) logoutBtn.style.display = 'inline-flex';
            } else {
                // 未ログイン時
                if (authLink) authLink.style.display = 'inline-flex';
                if (memberLink) memberLink.style.display = 'none';
                if (logoutBtn) logoutBtn.style.display = 'none';
            }
        }

        // ログアウト処理
        if (logoutBtn) {
            logoutBtn.addEventListener('click', async (e) => {
                e.preventDefault();
                if (confirm('ログアウトしますか？')) {
                    try {
                        await signOut(auth);
                        window.location.href = 'auth.html';
                    } catch (error) {
                        console.error('ログアウトエラー:', error);
                        alert('ログアウトに失敗しました。もう一度お試しください。');
                    }
                }
            });
        }

        // ユーザーのプラン情報を取得
        async function getUserPlan(user) {
            try {
                const userDoc = await getDoc(doc(db, 'users', user.uid));
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    return userData.plan || null;
                }
                return null;
            } catch (error) {
                console.error('プラン情報取得エラー:', error);
                return null;
            }
        }

        // 認証状態の監視
        onAuthStateChanged(auth, async (user) => {
            updateNavigation(user);
            if (user) {
                userPlan = await getUserPlan(user);
                console.log('ユーザーのプラン:', userPlan);
                updateVideoDisplay(); // 動画表示を更新
            } else {
                userPlan = null;
                updateVideoDisplay();
            }
        });

        // 動画表示を更新（premiumプランの場合は無料視聴可能にする）
        function updateVideoDisplay() {
            const isPremium = userPlan === 'premium';
            
            // バナーの表示/非表示
            const premiumBanner = document.getElementById('premiumBanner');
            const nonPremiumBanner = document.getElementById('nonPremiumBanner');
            
            if (isPremium) {
                if (premiumBanner) premiumBanner.style.display = 'block';
                if (nonPremiumBanner) nonPremiumBanner.style.display = 'none';
            } else {
                if (premiumBanner) premiumBanner.style.display = 'none';
                if (nonPremiumBanner) nonPremiumBanner.style.display = 'block';
            }
            
            // すべての購入ボタンを取得
            const buyButtons = document.querySelectorAll('.buy-btn');
            
            // LocalStorageから購入済み動画を取得
            let purchasedVideos = [];
            try {
                purchasedVideos = JSON.parse(localStorage.getItem('purchased_videos') || '[]');
            } catch (e) {
                console.warn('購入済み動画の取得に失敗:', e);
            }
            
            buyButtons.forEach(button => {
                // onclick属性から動画IDを抽出
                const onclickAttr = button.getAttribute('onclick');
                if (!onclickAttr) {
                    // 既に設定されているonclickがない場合、data属性から取得を試みる
                    const videoId = button.getAttribute('data-video-id');
                    if (!videoId) return;
                    
                    if (isPremium) {
                        button.textContent = '視聴可能';
                        button.classList.add('free-btn');
                        button.onclick = function(e) {
                            e.preventDefault();
                            playVideoFree(videoId);
                        };
                    } else if (purchasedVideos.includes(videoId)) {
                        button.textContent = '購入済み';
                        button.style.backgroundColor = '#28a745';
                        button.onclick = function() {
                            window.location.href = `payment-success.html?video_id=${videoId}`;
                        };
                    } else {
                        button.textContent = '購入する';
                        button.classList.remove('free-btn');
                        button.onclick = function(e) {
                            e.preventDefault();
                            purchaseVideo(videoId);
                        };
                    }
                    return;
                }

                const match = onclickAttr.match(/purchaseVideo\('(\w+)'\)/);
                if (!match) return;

                const videoId = match[1];

                if (isPremium) {
                    // premiumプランの場合：視聴可能にする（購入済みより優先）
                    button.textContent = '視聴可能';
                    button.style.backgroundColor = ''; // リセット
                    button.classList.add('free-btn');
                    button.onclick = function(e) {
                        e.preventDefault();
                        playVideoFree(videoId);
                    };
                } else if (purchasedVideos.includes(videoId)) {
                    // 購入済みの場合
                    button.textContent = '購入済み';
                    button.style.backgroundColor = '#28a745';
                    button.classList.remove('free-btn');
                    button.onclick = function() {
                        window.location.href = `payment-success.html?video_id=${videoId}`;
                    };
                } else {
                    // premiumプランでない場合：既存のStripe決済フローを使用
                    button.textContent = '購入する';
                    button.style.backgroundColor = ''; // リセット
                    button.classList.remove('free-btn');
                    button.onclick = function(e) {
                        e.preventDefault();
                        purchaseVideo(videoId);
                    };
                }
            });
        }

        // premiumプラン会員が無料で動画を視聴する関数
        function playVideoFree(videoId) {
            const vimeoUrl = VIDEO_VIMEO_URLS[videoId];
            if (!vimeoUrl) {
                alert('動画が見つかりませんでした。');
                return;
            }
            
            // Vimeo URLからIDを抽出
            const vimeoId = vimeoUrl.split('/').pop();
            const title = VIDEO_TITLES[videoId] || '動画';
            
            // 動画モーダルを開く
            openVideoModal(vimeoId, title);
        }

        // 動画モーダルを開く関数
        function openVideoModal(vimeoId, title) {
            const modal = document.getElementById('videoModal');
            const modalTitle = document.getElementById('modalTitle');
            const vimeoPlayer = document.getElementById('vimeoPlayer');
            
            modalTitle.textContent = title;
            vimeoPlayer.src = `https://player.vimeo.com/video/${vimeoId}?autoplay=1`;
            modal.classList.add('active');
            
            // モーダルを閉じる
            const closeBtn = modal.querySelector('.close-modal');
            closeBtn.onclick = () => {
                vimeoPlayer.src = ''; // 動画を停止
                modal.classList.remove('active');
            };
            
            modal.onclick = (e) => {
                if (e.target === modal) {
                    vimeoPlayer.src = ''; // 動画を停止
                    modal.classList.remove('active');
                }
            };
        }

        // グローバルに公開（既存のコードから呼び出せるように）
        window.checkPremiumAccess = function(videoId) {
            return userPlan === 'premium';
        };

        window.playVideoFree = playVideoFree;
        window.openVideoModal = openVideoModal;
    </script>

    <script>
        // フィルター機能
        const filterButtons = document.querySelectorAll('.filter-btn');
        const videoCards = document.querySelectorAll('.video-card');
        const categorySections = document.querySelectorAll('.category-section');
        const searchInput = document.getElementById('searchInput');

        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                // アクティブボタンの切り替え
                filterButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');

                const filter = button.getAttribute('data-filter');

                // カテゴリーセクションの表示/非表示
                if (filter === 'all') {
                    categorySections.forEach(section => section.style.display = 'block');
                    videoCards.forEach(card => card.style.display = 'block');
                } else if (filter === 'upper_limb' || filter === 'trunk' || filter === 'lower_limb') {
                    categorySections.forEach(section => {
                        if (section.getAttribute('data-category') === filter) {
                            section.style.display = 'block';
                        } else {
                            section.style.display = 'none';
                        }
                    });
                } else if (filter === 'observation' || filter === 'dynamics') {
                    categorySections.forEach(section => section.style.display = 'block');
                    videoCards.forEach(card => {
                        if (card.getAttribute('data-type') === filter) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                }
            });
        });

        // 検索機能
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();

            videoCards.forEach(card => {
                const title = card.getAttribute('data-title').toLowerCase();
                if (title.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });

            // セクションの表示/非表示（すべてのカードが非表示の場合はセクションも非表示）
            categorySections.forEach(section => {
                const visibleCards = section.querySelectorAll('.video-card[style*="display: block"], .video-card:not([style*="display: none"])');
                if (visibleCards.length === 0 || searchTerm !== '') {
                    // 検索中は該当するカードがあるセクションのみ表示
                    const anyVisible = Array.from(section.querySelectorAll('.video-card')).some(card =>
                        card.style.display !== 'none' && card.getAttribute('data-title').toLowerCase().includes(searchTerm)
                    );
                    section.style.display = anyVisible ? 'block' : 'none';
                } else {
                    section.style.display = 'block';
                }
            });
        });

        // スムーススクロール
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>

    <!-- Purchase System -->
    <script>
        console.log('📋 エコー動画販売ページ');

        // ページロード時に購入済み動画のボタンを更新
        // 注意: premiumプランの場合はupdateVideoDisplay()が優先されるため、
        // この関数はpremiumプランでない場合のみ実行される
        document.addEventListener('DOMContentLoaded', function() {
            // Firebase認証が完了するまで少し待つ
            setTimeout(() => {
                // premiumプランでない場合のみ購入済み動画を更新
                if (typeof userPlan === 'undefined' || userPlan !== 'premium') {
                    updatePurchasedButtons();
                }
            }, 1000);
        });

        /**
         * 購入済み動画のボタンを更新する関数
         * 注意: premiumプランの場合はupdateVideoDisplay()が優先される
         */
        function updatePurchasedButtons() {
            try {
                // premiumプランの場合はスキップ（updateVideoDisplay()が処理する）
                if (typeof userPlan !== 'undefined' && userPlan === 'premium') {
                    console.log('📝 Premium plan detected, skipping purchased buttons update');
                    return;
                }

                // LocalStorageから購入済み動画を取得
                const purchasedVideos = JSON.parse(localStorage.getItem('purchased_videos') || '[]');

                if (purchasedVideos.length === 0) {
                    console.log('📝 No purchased videos yet');
                    return;
                }

                console.log(`✅ Found ${purchasedVideos.length} purchased videos:`, purchasedVideos);

                // すべての購入ボタンを取得
                const buyButtons = document.querySelectorAll('.buy-btn');

                buyButtons.forEach(button => {
                    // onclick属性から動画IDを抽出
                    const onclickAttr = button.getAttribute('onclick');
                    if (!onclickAttr) return;

                    const match = onclickAttr.match(/purchaseVideo\('(\w+)'\)/);
                    if (!match) return;

                    const videoId = match[1];

                    // 購入済みかチェック
                    if (purchasedVideos.includes(videoId)) {
                        // ボタンを「購入済み」に変更
                        button.textContent = '購入済み';
                        button.style.backgroundColor = '#28a745';
                        button.style.cursor = 'pointer';
                        button.classList.remove('free-btn');

                        // クリック時は動画閲覧ページに遷移
                        button.onclick = function() {
                            window.location.href = `payment-success.html?video_id=${videoId}`;
                        };

                        console.log(`✅ Marked as purchased: ${videoId}`);
                    }
                });

            } catch (e) {
                console.error('⚠️ Failed to update purchased buttons:', e);
            }
        }
    </script>

    <!-- メニュートグル機能 -->
    <script>
        const menuToggle = document.getElementById('menuToggle');
        const navLinks = document.getElementById('navLinks');

        if (menuToggle && navLinks) {
            menuToggle.addEventListener('click', () => {
                menuToggle.classList.toggle('active');
                navLinks.classList.toggle('active');
            });

            // メニュー外をクリックしたら閉じる
            document.addEventListener('click', (e) => {
                if (!menuToggle.contains(e.target) && !navLinks.contains(e.target)) {
                    menuToggle.classList.remove('active');
                    navLinks.classList.remove('active');
                }
            });

            // メニューリンクをクリックしたら閉じる
            navLinks.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    menuToggle.classList.remove('active');
                    navLinks.classList.remove('active');
                });
            });
        }
    </script>

</body>
</html>
